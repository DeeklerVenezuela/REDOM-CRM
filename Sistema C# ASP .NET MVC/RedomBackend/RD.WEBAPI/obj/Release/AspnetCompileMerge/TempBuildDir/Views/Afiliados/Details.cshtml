@model RD.Data.Models.Afiliado

@{
    ViewBag.Title = "Afiliados";
}

<div class="wrapper">

    @Html.Partial("~/Views/Shared/_Header.cshtml")

    @*Import Sidebar Left*@
    @Html.Partial("~/Views/Shared/_SidebarLeft.cshtml")
    <div class="wrapper">
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>
                    Sistema de gestión
                    <small>Afiliados</small>
                </h1>
                <ol class="breadcrumb">
                    <li><a href="#"><i class="fa fa-newspaper-o"></i> Home</a></li>
                    <li><a href="#">Afiliados</a></li>
                </ol>
            </section>
            <section class="content">
                <div class="row">
                    <div class="col-xs-12">
                        <div class="box">
                            <div class="box-header">
                                <h3 class="box-title">Afiliados Registrados</h3>
                                <hr />
                            </div><!-- /.box-header -->
                            <div class="box-body">

                                <div>
                                    <h4>Afiliado</h4>
                                    <hr />
                                    <dl class="dl-horizontal">
                                        <dt>
                                            ID
                                        </dt>

                                        <dd>
                                            @{var j = Model.AfiliadoIndice.ToString();
                                                if (j.Length > 4)
                                            {
                                                @Html.Raw("7777-2552-" + j.Substring(1, 4) + "-" + j.Substring(4, 4))
                                            }
                                            else
                                            {
                                                @Html.DisplayFor(model => model.AfiliadoIndice)
                                            }

                                            }
                                        </dd>

                                        <dt>
                                            Cédula
                                        </dt>

                                        <dd>
                                            @Html.DisplayFor(model => model.Cedula)
                                        </dd>

                                        <dt>
                                            @Html.DisplayNameFor(model => model.Pasaporte)
                                        </dt>

                                        <dd>
                                            @Html.DisplayFor(model => model.Pasaporte)
                                        </dd>

                                        <dt>
                                            @Html.DisplayNameFor(model => model.Nombres)
                                        </dt>

                                        <dd>
                                            @Html.DisplayFor(model => model.Nombres)
                                        </dd>

                                        <dt>
                                            @Html.DisplayNameFor(model => model.Apellido1)
                                        </dt>

                                        <dd>
                                            @Html.DisplayFor(model => model.Apellido1)
                                        </dd>

                                        <dt>
                                            @Html.DisplayNameFor(model => model.Apellido2)
                                        </dt>

                                        <dd>
                                            @Html.DisplayFor(model => model.Apellido2)
                                        </dd>

                                        <dt>
                                            @Html.DisplayNameFor(model => model.RazonSocial)
                                        </dt>

                                        <dd>
                                            @Html.DisplayFor(model => model.RazonSocial)
                                        </dd>

                                        <dt>
                                            @Html.DisplayNameFor(model => model.RNC)
                                        </dt>

                                        <dd>
                                            @Html.DisplayFor(model => model.RNC)
                                        </dd>



                                        <dt>
                                            Cumpleaños
                                        </dt>

                                        <dd>
                                            @Html.DisplayFor(model => model.Cumpleanio)
                                        </dd>

                                        <dt>
                                            Meses Adicionales
                                        </dt>

                                        <dd>
                                            @Html.DisplayFor(model => model.MesesAdicionales)
                                        </dd>


                                        <dt>
                                            Tarjeta Adicional
                                        </dt>

                                        <dd>
                                            @Html.DisplayFor(model => model.TarjetaAdicional)
                                        </dd>

                                        <dt>
                                            Vencimiento Memb.
                                        </dt>

                                        <dd>
                                            @Html.DisplayFor(model => model.FechaVencimiento)
                                        </dd>

                                        <dt>
                                            @Html.DisplayNameFor(model => model.Observaciones)
                                        </dt>

                                        <dd>
                                            @Html.DisplayFor(model => model.Observaciones)
                                        </dd>

                                        <dt>
                                            @Html.DisplayNameFor(model => model.Status)
                                        </dt>

                                        <dd>
                                            @Html.DisplayFor(model => model.Status)
                                        </dd>

                                        <dt>
                                            Membresia
                                        </dt>

                                        <dd>
                                            $ @Html.DisplayFor(model => model.CostoMembresia)
                                        </dd>



                                        @{
                                            if (Model.Direcciones != null)
                                            {
                                                foreach (var i in Model.Direcciones)
                                                {
                                                    <dt>Dirección</dt>
                                                    <dd>@Html.Raw(i.Descripcion)</dd>
                                                }
                                            }

                                            if (Model.Emails != null)
                                            {
                                                foreach (var i in Model.Emails)
                                                {
                                                    <dt>Email</dt>
                                                    <dd>
                                                        @Html.Raw(i.Email)

                                                </dd>
                                                }
                                            }
                                            if (Model.Telefonos != null)
                                            {
                                                foreach (var i in Model.Telefonos)
                                                {
                                                    <dt>Teléfono</dt>
                                                    <dd>
                                                        @Html.Label(i.Descripcion)  |
                                                    @if (i.Extension != null)
                                                    { @Html.Label(i.Extension) @Html.Raw(" | ")}

                                                    @Html.Label(i.Tipo)
                                                </dd>
                                                }
                                            }


                                        }


                                    </dl>
                                </div>
                                <p>
                                   
                                    @Html.ActionLink("Editar", "Edit", new { id = Model.AfiliadoID }) |
                                    @Html.ActionLink("Volver al listado", "Index")
                                    @if(ViewBag.Report==true){
                                         @*<a id="dwReport" class="hide" href='@Url.Action("Report", "Report", new { ids = Model.AfiliadoID})'>Generar reporte</a>*@
    <a id="dwReport" target="_blank" class="hide" href='@Url.Action("Afiliacion", "Report", new { id = Model.AfiliadoID})'>Generar Report</a>
                                    }
                                </p>
                            </div><!-- /.box-body -->
                        </div><!-- /.box -->
                    </div><!-- /.col -->
                </div><!-- /.row -->
            </section><!-- /.content -->
        </div><!-- /.content-wrapper -->
    </div>
</div>
<script>
    $(document).ready(function () {
        //alert($("#dwReport").text());
        var dir = $("#dwReport").attr("href");
        //alert(dir);
        if (dir != null) {
            //window.location.href = dir;
            var aux = window.open(dir, '_blank');
            aux.focus();
        }
       // $("#dwReport").on("click", function () {
            //alert($("#dwReport").attr("href"));
     //   });
       // window.location()
        
    });
</script>
@*Import Sidebar Right*@
@Html.Partial("~/Views/Shared/_SidebarRight.cshtml")